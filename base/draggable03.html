<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Basic - Draggable03</title>
    <link rel="stylesheet" type="text/css" href="../js/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../js/easyui/themes/icon.css">
    <script type="text/javascript" src="../js/easyui/jquery.min.js"></script>
    <script type="text/javascript" src="../js/easyui/jquery.easyui.min.js"></script>
</head>

<body>

    <h2>步进拖拽</h2>
    <p>This sample shows how to snap a draggable object to a 20x20 grid.</p>
    <div style="margin:20px 0;"></div>
    <div class="easyui-panel" style="position:relative;overflow:hidden;width:500px;height:300px">
        <div id="dd1" class='easyui-draggable' data-options='onDrag:onDrag' style="width:198px;height:98px;border:#ff0 1px solid;background:#abc">
            <div id="title1" style="background:#ccc;">实时显示坐标，自动回位</div>
            <p></p>
        </div>
    </div>
    <script>
        function onDrag(e) {
            var d = e.data;
            d.left = repair(d.left);
            d.top = repair(d.top);

            var str = 'Left:' + d.left + " Top:" + d.top + "<br>Right: " + (d.left + $(d.target).outerWidth()) + " Bottom:" + (d.top + $(d.target).outerHeight());
            $('#dd1 p').html(str);

            function repair(v) {
                var r = parseInt(v / 20) * 20;
                if (Math.abs(v % 20) > 10) {
                    r += v > 0 ? 20 : -20;
                }
                return r;
            }
        }
    </script>
</body>

</html>